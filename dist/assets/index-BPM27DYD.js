import"./phaser-DeWi_-qS.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();class e extends Phaser.Scene{constructor(){super("MainMenu")}preload(){this.load.image("background","assets/level-1/bg.png"),this.load.image("title","assets/title.png"),this.load.image("level1","assets/fettuccine.png"),this.load.image("level2","assets/farfalle.png"),this.load.image("level3","assets/rigatoni.png"),this.load.image("level4","assets/ravioli.png"),this.load.image("lock","assets/lock.png"),this.load.image("title-bg","assets/title-bg.png"),this.load.image("startButton","assets/start-button.png"),this.load.image("dialogueBg","assets/dialogue-bg.png"),this.load.spritesheet("grandma","assets/grandma-blinking.png",{frameWidth:1125,frameHeight:1125})}create(){const e=this.sound.add("hover"),t=this.sound.add("start"),s=this.sound.add("select"),i=this.add.image(0,0,"background");i.setOrigin(0,0),i.setDisplaySize(this.sys.game.config.width,this.sys.game.config.height),this.add.image(this.cameras.main.width/2,200,"title").setOrigin(.5,.5).setScale(.5).preFX.addShadow();const a=this.add.image(100,100,"muteIcon");a.setInteractive(),a.setScale(.1),a.setVisible(!1),a.on("pointerdown",(()=>{this.sound.mute=!1,s.play(),a.setVisible(!1),n.setVisible(!0)}));const n=this.add.image(100,100,"soundIcon");n.setInteractive(),n.setScale(.1),n.on("pointerdown",(()=>{s.play(),this.sound.mute=!0,a.setVisible(!0),n.setVisible(!1)})),this.anims.create({key:"grandma",frames:this.anims.generateFrameNumbers("grandma",{start:0,end:8}),frameRate:5,repeat:-1}),this.nonna=this.add.sprite(this.cameras.main.width/2,this.cameras.main.height-300,"grandma").setOrigin(.5,.5),this.nonna.setScale(700/this.nonna.width),this.nonna.preFX.addShadow(),this.nonna.play("grandma");const o=this.add.image(this.cameras.main.width/2,this.cameras.main.height/4+250,"startButton").setOrigin(.5,.5).setInteractive();o.setScale(250/this.cameras.main.width),o.preFX.addShadow(),o.on("pointerover",(function(t){e.play(),o.setScale(300/this.cameras.main.width)}),this),o.on("pointerout",(function(e){o.setScale(250/this.cameras.main.width)}),this),o.on("pointerdown",(function(e){t.play(),this.scene.start("Level1IntroStep1")}),this)}}class t extends Phaser.Scene{constructor(){super("Level1")}preload(){this.load.image("level-1-bg","assets/level-1/bg.png"),this.load.image("choppingBoard","assets/level-1/chopping-board.png"),this.load.image("clipboard","assets/clipboard.png"),this.load.image("well","assets/level-1/well.png"),this.load.image("flourMound","assets/level-1/flour-mound.png"),this.load.image("flourEggOne","assets/level-1/flour-egg-one.png"),this.load.image("flourEggTwo","assets/level-1/flour-egg-two.png"),this.load.image("flourJarBase","assets/level-1/flour-jar-base.png"),this.load.image("saltJar","assets/level-1/salt-jar.png"),this.load.image("semolinaJar","assets/level-1/semolina-jar.png"),this.load.image("oliveOil","assets/level-1/olive-oil.png"),this.load.image("knife","assets/level-1/knife.png"),this.load.image("eggCarton","assets/level-1/egg-carton.png"),this.load.image("eggOutline","assets/level-1/egg-outline.png"),this.load.image("fork","assets/level-1/fork.png"),this.load.image("whiskedEggs","assets/level-1/whisked-eggs.png"),this.load.image("tissues","assets/level-1/tissues.png"),this.load.image("tomatoes","assets/level-1/tomatoes.png"),this.load.image("basil","assets/level-1/basil.png"),this.load.image("sparkle","assets/sparkle.png"),this.load.image("flourParticle","assets/flour-particle.png"),this.load.image("spiral","assets/spiral.png"),this.load.image("rollingPin","assets/level-1/rolling-pin.png"),this.load.image("slice1","assets/sliced-dough/1.png"),this.load.image("slice2","assets/sliced-dough/2.png"),this.load.image("slice3","assets/sliced-dough/3.png"),this.load.image("slice4","assets/sliced-dough/4.png"),this.load.image("toastBg","assets/level-1/toast-bg.png"),this.load.image("arrow","assets/level-1/arrow.png"),this.load.image("clockwiseArrow","assets/level-1/clockwise-arrow.png"),this.load.image("antiClockwiseArrow","assets/level-1/anticlockwise-arrow.png"),this.load.image("crackedEggs1","assets/level-1/cracked-eggs-1.png"),this.load.image("crackedEggs2","assets/level-1/cracked-eggs-2.png"),this.load.image("crackedEggs3","assets/level-1/cracked-eggs-3.png"),this.load.image("crackedEggs4","assets/level-1/cracked-eggs-4.png"),this.load.image("crackedEggs5","assets/level-1/cracked-eggs-5.png"),this.load.image("dough1","assets/level-1/dough-1.png"),this.load.image("dough2","assets/level-1/dough-2.png"),this.load.image("dough3","assets/level-1/dough-3.png"),this.load.image("dough4","assets/level-1/dough-4.png"),this.load.image("dough5","assets/level-1/dough-5.png"),this.load.image("dough6","assets/level-1/dough-6.png"),this.load.image("rolledDough1","assets/level-1/rolled-dough-1.png"),this.load.image("rolledDough2","assets/level-1/rolled-dough-2.png"),this.load.image("rolledDough3","assets/level-1/rolled-dough-3.png"),this.load.image("rolledDough4","assets/level-1/rolled-dough-4.png"),this.load.image("dottedLine","assets/level-1/dotted-line.png"),this.load.image("unfoldedPasta","assets/level-1/unfolded-pasta.png"),this.load.image("foldedDough1","assets/level-1/folded-dough-1.png"),this.load.image("foldedDough2","assets/level-1/folded-dough-2.png"),this.load.image("noodle1","assets/level-1/noodles/1.png"),this.load.image("noodle2","assets/level-1/noodles/2.png"),this.load.image("noodle3","assets/level-1/noodles/3.png"),this.load.image("noodle4","assets/level-1/noodles/4.png"),this.load.image("noodle5","assets/level-1/noodles/5.png"),this.load.image("noodle6","assets/level-1/noodles/6.png"),this.load.image("noodle7","assets/level-1/noodles/7.png"),this.load.image("noodle8","assets/level-1/noodles/8.png"),this.load.spritesheet("flourJar","assets/level-1/flour-jar.png",{frameWidth:1e3,frameHeight:1e3}),this.load.spritesheet("egg","assets/level-1/egg.png",{frameWidth:360,frameHeight:360}),this.load.spritesheet("napkin","assets/level-1/napkin.png",{frameWidth:540,frameHeight:540}),this.load.audio("eggCracking","assets/sound-effects/cracking-egg.wav"),this.load.audio("whiskSound","assets/sound-effects/whisk.mp3"),this.load.audio("whooshSound","assets/sound-effects/whoosh.wav"),this.load.audio("sliceSound","assets/sound-effects/slice.wav"),this.load.audio("rollingSound","assets/sound-effects/rolling.mp3"),this.load.audio("step-1","assets/level-1/dialogues/step-1-edited.mp3"),this.load.audio("step-2","assets/level-1/dialogues/step-2-edited.mp3"),this.load.audio("step-3","assets/level-1/dialogues/step-3-edited.mp3"),this.load.audio("step-4","assets/level-1/dialogues/step-4-edited.mp3"),this.load.audio("step-5","assets/level-1/dialogues/step-5-edited.mp3"),this.load.audio("step-6","assets/level-1/dialogues/step-6-edited.mp3"),this.load.audio("step-7","assets/level-1/dialogues/step-7-edited.mp3"),this.load.audio("step-8","assets/level-1/dialogues/step-8-edited.mp3"),this.load.audio("step-9","assets/level-1/dialogues/step-9-edited.mp3"),this.load.audio("step-10","assets/level-1/dialogues/step-10-edited.mp3"),this.load.audio("step-11","assets/level-1/dialogues/step-11-edited.mp3")}create(){this.hoverSound=this.sound.add("hover"),this.wrongOption=this.sound.add("wrongOption"),this.selectSound=this.sound.add("select"),this.setBg(),this.setChoppingBoard(),this.setItems(),this.setInstructions(),this.currentStep=0,this.placeFlour()}markStepCompleted(){this.currentStep++}setItems(){const e=(e,t,s,i,a={x:.5,y:.5})=>{const n=this.add.image(e,t,s).setScale(i).setOrigin(a.x,a.y).setInteractive().setDepth(2);return n.preFX.addShadow(0,0,.1,1,"0x000000",6,.5),n};this.items={saltJar:{x:1050,y:110,key:"saltJar",scale:.09},semolinaJar:{x:520,y:400,key:"semolinaJar",scale:.12},eggCarton:{x:30,y:30,key:"eggCarton",scale:.18,origin:{x:0,y:0}},flourJarBase:{x:0,y:400,key:"flourJarBase",scale:.22,origin:{x:0,y:0}},oliveOil:{x:525,y:130,key:"oliveOil",scale:.1},basil:{x:530,y:1080,key:"basil",scale:.18},fork:{x:550,y:690,key:"fork",scale:.18},knife:{x:1150,y:250,key:"knife",scale:.2},tissues:{x:775,y:160,key:"tissues",scale:.15},rollingPin:{x:950,y:1100,key:"rollingPin",scale:.25,origin:{x:.5,y:.5}}},Object.entries(this.items).forEach((([t,s])=>{const i=e(s.x,s.y,s.key,s.scale,s.origin||void 0);let a;i.on("pointerover",(()=>{this.hoverSound.play(),a=i.preFX.addGlow("0xffc75e",1,0,!1)})),i.on("pointerout",(()=>{null==a||a.setActive(!1)})),this.items[t]=i})),this.setEggs(),this.setNapkin(),this.setFlourJar()}setEggs(){this.items.eggs=[];for(let e=0;e<3;e++)for(let t=0;t<3;t++){const s=this.add.sprite(100+110*e,100+100*t,"egg").setScale(.45).setDepth(3).setInteractive();s.preFX.addShadow(0,0,.1,1,"0x000000",6,.5),this.anims.create({key:"egg",frames:this.anims.generateFrameNumbers("egg",{start:0,end:8}),frameRate:15,repeat:0}),this.items.eggs.push(s)}}setNapkin(){this.items.napkin=this.add.sprite(200,1050,"napkin").setOrigin(.5,.5).setScale(.8).setDepth(2).setInteractive(),this.items.napkin.preFX.addShadow(0,0,.1,1,"0x000000",6,.5),this.anims.create({key:"napkin",frames:this.anims.generateFrameNumbers("napkin",{start:0,end:3}),frameRate:8,repeat:0})}setFlourJar(){this.items.flourJar=this.add.sprite(-70,320,"flourJar").setOrigin(0,0).setScale(.6).setDepth(2).setInteractive(),this.items.flourJar.preFX.addShadow(0,0,.1,1,"0x000000",6,.5),this.anims.create({key:"flourJar",frames:this.anims.generateFrameNumbers("flourJar",{start:0,end:11}),frameRate:15,repeat:-1})}placeFlour(){const{x:e,y:t}=this.items.flourJar;this.showToast("First, we make the dough. Take some flour—just a nice mound on the table.","step-1"),this.input.setDraggable(this.items.flourJar),this.items.flourJar.on("drag",((e,t,s)=>{this.items.flourJar.x=t,this.items.flourJar.y=s})),this.items.flourJar.on("dragend",(()=>{const s=this.items.flourJar.getBounds(),i=this.choppingBoard.getBounds();Phaser.Geom.Intersects.RectangleToRectangle(s,i)&&0===this.currentStep?(this.selectSound.play(),this.items.flourJar.play("flourJar"),this.currentStepObj=this.add.image(this.cameras.main.width/2,this.cameras.main.height/2,"flourMound").setOrigin(.5,.5).setInteractive(),this.currentStepObj.setScale(500/this.currentStepObj.width),this.currentStepObj.preFX.addShadow(0,0,.1,1,"0x000000",6,.5),this.tweens.add({targets:this.currentStepObj,scale:{from:0,to:500/this.currentStepObj.width},duration:3e3,ease:"Power0",yoyo:!1,repeat:0,onComplete:()=>{this.time.delayedCall(1e3,(()=>{this.makeWellInFlour()})),this.items.flourJar.anims.stop(),this.items.flourJar.setFrame(0),this.tweens.add({targets:this.items.flourJar,x:e,y:t,duration:500,ease:"Power0",yoyo:!1,repeat:0}),this.input.setDraggable(this.items.flourJar,!1)}}),this.addSparkle(this.cameras.main.width/2,this.cameras.main.height/2)):this.wrongOption.play()}))}makeWellInFlour(){this.showToast("Now, make a little well in the middle. Like a tiny volcano! Perfect for cracking the eggs into. Don’t be shy, now!","step-2");let e=0,t=this.add.graphics();t.lineStyle(4,4662814);const s=t.strokeCircle(this.cameras.main.width/2,this.cameras.main.height/2,110).setDepth(2).setInteractive();this.tweens.add({targets:s,alpha:{from:.4,to:1},duration:1e3,ease:"Power0",yoyo:!0,repeat:-1});let i=this.add.circle(this.cameras.main.width/2,this.cameras.main.height/2,110).setDepth(2).setInteractive();const a=[300,400,500];i.on("pointerdown",(()=>{var s;null==(s=this.well)||s.destroy(),this.well=this.add.image(this.cameras.main.width/2,this.cameras.main.height/2,"well").setOrigin(.5,.5).setInteractive(),this.well.setScale(a[e]/this.well.width),this.tweens.add({targets:this.well,scale:{from:e>0?a[e-1]/this.well.width:0,to:a[e]/this.well.width},duration:500}),this.addSparkle(this.cameras.main.width/2,this.cameras.main.height/2),e++,3===e&&(t.clear(),i.destroy(),this.time.delayedCall(1e3,(()=>{this.crackEggs()})))}))}setChoppingBoard(){this.choppingBoard=this.add.image(this.cameras.main.width/2,this.cameras.main.height/2,"choppingBoard").setOrigin(.5,.5),this.choppingBoard.setScale(650/this.choppingBoard.width),this.choppingBoard.preFX.addShadow(0,0,.1,1,"0x000000",6,.5)}setInstructions(){this.nonna=this.add.sprite(this.cameras.main.width-700,this.cameras.main.height-300,"grandmaSpeaking").setOrigin(0,.5),this.nonna.setScale(700/this.nonna.width),this.nonna.preFX.addShadow(0,0,.1,1,"0x000000",6,.5)}setBg(){const e=this.add.image(0,0,"level-1-bg");e.setOrigin(0,0),e.setDisplaySize(this.sys.game.config.width,this.sys.game.config.height),e.preFX.addVignette(.5,.5,.9,.5)}crackEggs(){this.showToast("Now, it’s time for the eggs! Crack the eggs gently, like you’re handling a newborn chick. No shell pieces, eh? We don’t want crunchy pasta!","step-3");const e=this.sound.add("eggCracking");let t=this.add.image(this.cameras.main.width/2-30,this.cameras.main.height/2+10,"eggOutline").setScale(.08).setInteractive();this.tweens.add({targets:[t],alpha:.2,duration:500,ease:"Power0",yoyo:!0,repeat:-1});let s=0;this.items.eggs.forEach((i=>{this.input.setDraggable(i);let[a,n]=[i.x,i.y];i.on("drag",((e,t,s)=>{i.x=t,i.y=s})),i.on("dragend",(()=>{const o=i.getBounds(),h=this.currentStepObj.getBounds();e.play(),Phaser.Geom.Intersects.RectangleToRectangle(o,h)?(i.play("egg"),i.on("animationcomplete",(()=>{i.destroy(),t.destroy(),0===s?(this.crackedEggs=this.add.image(this.cameras.main.width/2,this.cameras.main.height/2,"crackedEggs1").setOrigin(.5,.5).setInteractive(),this.crackedEggs.setScale(500/this.crackedEggs.width),s++,t=this.add.image(this.cameras.main.width/2+40,this.cameras.main.height/2-30,"eggOutline").setScale(.08).setInteractive(),this.tweens.add({targets:[t],alpha:.2,duration:500,ease:"Power0",yoyo:!0,repeat:-1})):(t.destroy(),this.crackedEggs.destroy(),this.crackedEggs=this.add.image(this.cameras.main.width/2,this.cameras.main.height/2,"crackedEggs2").setOrigin(.5,.5).setInteractive(),this.crackedEggs.setScale(500/this.crackedEggs.width),this.addSparkle(this.cameras.main.width/2,this.cameras.main.height/2),this.time.delayedCall(2e3,(()=>{this.whiskEggs()})))}))):(this.wrongOption.play(),this.tweens.add({targets:i,x:a,y:n,duration:500,ease:"Power2"}))}))}))}whiskEggs(){this.showToast("Ah, look at that—beautiful! Now, use your fork to gently mix the eggs.","step-4");const e=this.items.fork,{x:t,y:s}=e;this.input.setDraggable(e);let i=null,a=0,n=3,o=!1;e.on("dragstart",(e=>{}));const h=this.sound.add("whiskSound");e.on("dragstart",(e=>{h.play({loop:!0,volume:2})})),e.on("drag",((t,s,h)=>{if(e.x=s,e.y=h,this.tweens.add({targets:this.crackedEggs,angle:360,duration:1e3,ease:"Linear",repeat:0}),null!==i){if(Math.abs(s-i)>100&&(a++,i=s,a%14==0&&!o)){const e=this.crackedEggs;this.crackedEggs=this.add.image(this.cameras.main.width/2,this.cameras.main.height/2,"crackedEggs"+n).setAlpha(0).setOrigin(.5,.5).setInteractive(),this.crackedEggs.setScale(500/this.crackedEggs.width),this.tweens.add({targets:this.crackedEggs,alpha:1,duration:500,ease:"Power2",onComplete:()=>{e.destroy()}}),n++}}else i=s;42!==a||o||(o=!0,this.addSparkle(this.cameras.main.width/2,this.cameras.main.height/2),this.markStepCompleted(),this.input.setDraggable(e,!1),this.time.delayedCall(2e3,(()=>{this.kneadDough()})))})),e.on("dragend",(()=>{i=null,h.stop(),this.tweens.add({targets:e,x:t,y:s,duration:500,ease:"Power2"})}))}kneadDough(){this.showToast("Time to get your hands dirty! Knead the dough like it owes you rent! Push, fold, and turn. Feel it! It should be smooth like a bambino’s cheek.","step-5"),this.kneadDown()}kneadDown(){const e=this.add.group(),t=[-100,0,100];for(let h of t){let t=this.add.image(this.cameras.main.width/2+h,this.cameras.main.height/2,"arrow").setAlpha(0).setOrigin(.5,.5).setInteractive();t.setScale(300/t.width),this.tweens.add({targets:t,alpha:1,duration:1e3,ease:"Power2"}),e.add(t)}let s,i,a,n,o=0;this.input.on("pointerdown",(e=>{s=e.x,i=e.y})),this.input.on("pointerup",(t=>{if(a=t.x,n=t.y,this.detectSwipe(s,i,a,n,"down")){o++,this.addSparkle(this.cameras.main.width/2,this.cameras.main.height/2);let t=e.getFirstAlive();t&&(t.destroy(),e.remove(t)),3===o&&(e.clear(!0,!0),this.input.removeListener("pointerdown"),this.input.removeListener("pointerup"),this.kneadRight())}}))}kneadRight(){this.crackedEggs.destroy(),this.well.destroy(),this.currentStepObj.destroy(),this.currentStepObj=this.add.image(this.cameras.main.width/2,this.cameras.main.height/2,"dough1").setOrigin(.5,.5).setInteractive(),this.currentStepObj.setScale(500/this.currentStepObj.width),this.currentStepObj.preFX.addShadow(0,0,.1,1,"0x000000",6,.5);const e=this.add.group(),t=[-100,0,100];for(let h of t){let t=this.add.image(this.cameras.main.width/2,this.cameras.main.height/2+h,"arrow").setAngle(-90).setAlpha(0).setOrigin(.5,.5).setInteractive();t.setScale(300/t.width),this.tweens.add({targets:t,alpha:1,duration:1e3,ease:"Power2"}),e.add(t)}let s,i,a,n,o=0;this.input.on("pointerdown",(e=>{s=e.x,i=e.y})),this.input.on("pointerup",(t=>{if(a=t.x,n=t.y,this.detectSwipe(s,i,a,n,"right")){o++,this.addSparkle(this.cameras.main.width/2,this.cameras.main.height/2);let t=e.getFirstAlive();t&&(t.destroy(),e.remove(t)),3===o&&(e.clear(!0,!0),this.input.removeListener("pointerdown"),this.input.removeListener("pointerup"),this.kneadClockwise())}}))}kneadClockwise(){this.currentStepObj.destroy(),this.currentStepObj=this.add.image(this.cameras.main.width/2,this.cameras.main.height/2,"dough2").setOrigin(.5,.5).setInteractive(),this.currentStepObj.setScale(500/this.currentStepObj.width),this.currentStepObj.preFX.addShadow(0,0,.1,1,"0x000000",6,.5),this.addSparkle(this.cameras.main.width/2,this.cameras.main.height/2);const e=this.add.image(this.cameras.main.width/2,this.cameras.main.height/2,"clockwiseArrow").setAngle(-90).setAlpha(0).setOrigin(.5,.5).setInteractive();let t,s,i,a;e.setScale(300/e.width),this.tweens.add({targets:e,alpha:1,duration:1e3,ease:"Power2"}),this.input.on("pointerdown",(e=>{t=e.x,s=e.y})),this.input.on("pointerup",(n=>{i=n.x,a=n.y,this.detectSwipe(t,s,i,a,"up")&&(e.destroy(),this.input.removeListener("pointerdown"),this.input.removeListener("pointerup"),this.kneadAntiClockwise())}))}kneadAntiClockwise(){this.currentStepObj.destroy(),this.currentStepObj=this.add.image(this.cameras.main.width/2,this.cameras.main.height/2,"dough3").setOrigin(.5,.5).setInteractive(),this.currentStepObj.setScale(500/this.currentStepObj.width),this.currentStepObj.preFX.addShadow(0,0,.1,1,"0x000000",6,.5),this.addSparkle(this.cameras.main.width/2,this.cameras.main.height/2);const e=this.add.image(this.cameras.main.width/2,this.cameras.main.height/2,"antiClockwiseArrow").setAngle(-90).setAlpha(0).setOrigin(.5,.5).setInteractive();let t,s,i,a;e.setScale(300/e.width),this.tweens.add({targets:e,alpha:1,duration:1e3,ease:"Power2"}),this.input.on("pointerdown",(e=>{t=e.x,s=e.y})),this.input.on("pointerup",(n=>{i=n.x,a=n.y,this.detectSwipe(t,s,i,a,"up")&&(e.destroy(),this.input.removeListener("pointerdown"),this.input.removeListener("pointerup"),this.kneadUp())}))}kneadUp(){this.currentStepObj.destroy(),this.currentStepObj=this.add.image(this.cameras.main.width/2,this.cameras.main.height/2,"dough4").setOrigin(.5,.5).setInteractive(),this.currentStepObj.setScale(500/this.currentStepObj.width),this.currentStepObj.preFX.addShadow(0,0,.1,1,"0x000000",6,.5),this.addSparkle(this.cameras.main.width/2,this.cameras.main.height/2);const e=this.add.image(this.cameras.main.width/2,this.cameras.main.height/2,"arrow").setOrigin(.5,.5).setAngle(-180).setInteractive().setAlpha(0);let t,s,i,a;e.setScale(300/e.width),this.tweens.add({targets:e,alpha:1,duration:1e3,ease:"Power2"}),this.input.on("pointerdown",(e=>{t=e.x,s=e.y})),this.input.on("pointerup",(n=>{i=n.x,a=n.y,this.detectSwipe(t,s,i,a,"up")&&(e.destroy(),this.input.removeListener("pointerdown"),this.input.removeListener("pointerup"),this.kneadDownAgain())}))}kneadDownAgain(){this.currentStepObj.destroy(),this.currentStepObj=this.add.image(this.cameras.main.width/2,this.cameras.main.height/2,"dough5").setOrigin(.5,.5).setInteractive(),this.currentStepObj.setScale(500/this.currentStepObj.width),this.currentStepObj.preFX.addShadow(0,0,.1,1,"0x000000",6,.5),this.addSparkle(this.cameras.main.width/2,this.cameras.main.height/2);const e=this.add.image(this.cameras.main.width/2,this.cameras.main.height/2,"arrow").setOrigin(.5,.5).setInteractive().setAlpha(0);let t,s,i,a;e.setScale(300/e.width),this.tweens.add({targets:e,alpha:1,duration:1e3,ease:"Power2"}),this.input.on("pointerdown",(e=>{t=e.x,s=e.y})),this.input.on("pointerup",(n=>{i=n.x,a=n.y,this.detectSwipe(t,s,i,a,"down")&&(e.destroy(),this.input.removeListener("pointerdown"),this.input.removeListener("pointerup"),this.kneadUpAgain())}))}kneadUpAgain(){this.currentStepObj.destroy(),this.currentStepObj=this.add.image(this.cameras.main.width/2,this.cameras.main.height/2,"dough6").setOrigin(.5,.5).setInteractive(),this.currentStepObj.setScale(500/this.currentStepObj.width),this.currentStepObj.preFX.addShadow(0,0,.1,1,"0x000000",6,.5),this.addSparkle(this.cameras.main.width/2,this.cameras.main.height/2),this.restDough()}restDough(){this.showToast("Bravo! You kneaded that dough like a true pasta master! But listen, even dough needs a little nap. If you try to roll it out now, it will fight back like a stubborn mule!","step-6",(()=>{this.showToast("Wrap it up nice and cozy, let it rest for at least 30 minutes. This gives the gluten time to relax—just like you should!","step-7")}));const e=this.items.napkin;this.input.setDraggable(e),e.on("drag",((t,s,i)=>{e.x=s,e.y=i})),e.on("dragend",(()=>{const e=this.items.napkin.getBounds(),t=this.choppingBoard.getBounds();Phaser.Geom.Intersects.RectangleToRectangle(e,t)?(this.selectSound.play(),this.items.napkin.play("napkin"),this.currentStepObj.destroy(),this.addSparkle(this.cameras.main.width/2,this.cameras.main.height/2),this.time.delayedCall(5e3,(()=>{this.anims.create({key:"reverseNapkin",frames:this.anims.generateFrameNumbers("napkin",{start:3,end:0}),frameRate:10,repeat:0}),this.items.napkin.play("reverseNapkin"),this.items.napkin.on("animationcomplete",(()=>{this.currentStepObj=this.add.image(this.cameras.main.width/2,this.cameras.main.height/2,"dough6").setOrigin(.5,.5).setInteractive(),this.currentStepObj.setScale(500/this.currentStepObj.width),this.currentStepObj.preFX.addShadow(0,0,.1,1,"0x000000",6,.5),this.tweens.add({targets:this.items.napkin,x:200,y:1050,duration:500,ease:"Power2"})})),this.rollDough()}))):this.wrongOption.play()}))}rollDough(){this.showToast("Now, the real fun begins! Grab your rolling pin. Roll the dough out nice and thin—like a sheet of paper.","step-8");const e=this.sound.add("rollingSound"),t=this.items.rollingPin,{x:s,y:i}=t;this.input.setDraggable(t);let a=null,n=0,o=1,h=!1;t.on("dragstart",(t=>{h||e.play({loop:!0})})),t.on("drag",((e,s,i)=>{if(t.x=s,t.y=i,null!==a){if(Math.abs(i-a)>200&&(n++,a=i,n%5==0&&!h)){const e=this.currentStepObj;this.currentStepObj=this.add.image(this.cameras.main.width/2,this.cameras.main.height/2,"rolledDough"+o).setOrigin(.5,.5).setAlpha(0).setInteractive(),this.currentStepObj.setScale(500/this.currentStepObj.width),this.currentStepObj.preFX.addShadow(0,0,.1,1,"0x000000",6,.5),this.tweens.add({targets:this.currentStepObj,alpha:1,duration:500,ease:"Power2",onComplete:()=>{e.destroy()}}),o++,this.addSparkle(this.cameras.main.width/2,this.cameras.main.height/2)}}else a=i;20!==n||h||(h=!0,this.foldDough(),this.input.setDraggable(t,!1))})),t.on("dragend",(()=>{a=null,e.stop(),this.tweens.add({targets:t,x:s,y:i,duration:500,ease:"Power2"})}))}foldDough(){this.showToast("Ah, now we make the magic happen! Fold the dough carefully, like a love letter.","step-9"),this.foldDown()}foldDown(){const e=this.add.image(this.cameras.main.width/2,this.cameras.main.height/2-100,"arrow").setOrigin(.5,.5).setInteractive();let t,s,i,a;e.setScale(200/e.width),this.input.on("pointerdown",(e=>{t=e.x,s=e.y})),this.input.on("pointerup",(n=>{i=n.x,a=n.y,this.detectSwipe(t,s,i,a,"down")&&(e.destroy(),this.input.removeListener("pointerdown"),this.input.removeListener("pointerup"),this.foldUp())}))}foldUp(){this.currentStepObj.destroy(),this.currentStepObj=this.add.image(this.cameras.main.width/2,this.cameras.main.height/2,"foldedDough1").setOrigin(.5,.5).setInteractive(),this.currentStepObj.setScale(500/this.currentStepObj.width),this.currentStepObj.preFX.addShadow(0,0,.1,1,"0x000000",6,.5),this.addSparkle(this.cameras.main.width/2,this.cameras.main.height/2);const e=this.add.image(this.cameras.main.width/2,this.cameras.main.height/2+100,"arrow").setOrigin(.5,.5).setAngle(-180).setInteractive();let t,s,i,a;e.setScale(200/e.width),this.input.on("pointerdown",(e=>{t=e.x,s=e.y})),this.input.on("pointerup",(n=>{i=n.x,a=n.y,this.detectSwipe(t,s,i,a,"up")&&(e.destroy(),this.input.removeListener("pointerdown"),this.input.removeListener("pointerup"),this.currentStepObj.destroy(),this.currentStepObj=this.add.image(this.cameras.main.width/2,this.cameras.main.height/2,"foldedDough2").setOrigin(.5,.5).setInteractive(),this.currentStepObj.setScale(500/this.currentStepObj.width),this.currentStepObj.preFX.addShadow(0,0,.1,1,"0x000000",6,.5),this.addSparkle(this.cameras.main.width/2,this.cameras.main.height/2),this.cutRibbons())}))}cutRibbons(){this.showToast("At last, take your knife and cut beautiful, even strips.","step-10");const e=this.add.group(),t=[-110,-70,-30,10,50,90,130];for(let l of t){const t=this.add.image(this.cameras.main.width/2+l,this.cameras.main.height/2,"dottedLine").setOrigin(.5,.5).setInteractive();t.setScale(300/t.width),e.add(t)}let s=[];const{x:i,y:a}=this.items.knife,n=this.add.graphics();n.lineStyle(10,16777215,.5);let o=this.add.graphics({lineStyle:{width:4,color:16711680}}),h=!1,r=null;const d=this.sound.add("sliceSound");this.input.on("pointerdown",(e=>{h=!0,r={x:e.x,y:e.y}})),this.input.on("pointermove",(e=>{if(!h)return;o.clear(),o.lineBetween(r.x,r.y,e.x,e.y),o.strokePath();const t=new Phaser.Geom.Line(r.x,r.y,e.x,e.y);Phaser.Geom.Intersects.LineToRectangle(t,this.currentStepObj.getBounds())&&(this.currentStepObj.setTint(16764108),this.items.knife.setOrigin(0,.5),this.items.knife.x=e.x+10,this.items.knife.y=e.y+10)})),this.addSparkle(this.cameras.main.width/2,this.cameras.main.height/2),this.input.on("pointerup",(()=>{if(h=!1,this.tweens.add({targets:this.items.knife,x:i,y:a,duration:500,ease:"Power2"}),r=null,s.push(o),d.play(),7===s.length){e.clear(!0,!0);for(const e of s)e.clear();n.destroy(),this.currentStepObj.destroy(),this.currentStepObj=this.add.group();for(let e=1;e<9;e++){const t=this.add.image(this.cameras.main.width/2,this.cameras.main.height/2,"noodle"+e).setOrigin(.5,.5).setInteractive();t.setScale(500/t.width),t.preFX.addShadow(0,0,.1,1,"0x000000",6,.5);const s=[-70,-50,-30,-10,10,30,50,70];this.tweens.add({targets:t,x:t.x+s[e-1],duration:500,ease:"Power2"}),this.currentStepObj.add(t)}return this.input.removeListener("pointerdown"),this.input.removeListener("pointerup"),this.input.removeListener("pointermove"),this.addSparkle(this.cameras.main.width/2,this.cameras.main.height/2),void this.unfoldPasta()}o=this.add.graphics({lineStyle:{width:4,color:16711680}}),this.currentStepObj.clearTint(),this.items.knife.setOrigin(.5,.5)}))}unfoldPasta(){this.showToast("Unfold those strips and look! That’s your fettuccine! It’s like little ribbons of happiness. If they’re a bit uneven, we call it ‘rustic,’ eh?","step-11");const e=this.add.image(this.cameras.main.width/2,this.cameras.main.height/2+400,"arrow").setOrigin(.5,.5).setAngle(-90).setInteractive();let t,s,i,a;e.setScale(300/e.width),this.input.on("pointerdown",(e=>{t=e.x,s=e.y})),this.input.on("pointerup",(n=>{i=n.x,a=n.y,this.detectSwipe(t,s,i,a,"right")&&(e.destroy(),this.input.removeListener("pointerdown"),this.input.removeListener("pointerup"),this.currentStepObj.clear(!0,!0),this.currentStepObj=this.add.image(this.cameras.main.width/2,this.cameras.main.height/2,"unfoldedPasta").setAlpha(0).setOrigin(.5,.5).setInteractive(),this.currentStepObj.setScale(500/this.currentStepObj.width),this.currentStepObj.preFX.addShadow(0,0,.1,1,"0x000000",6,.5),this.tweens.add({targets:this.currentStepObj,alpha:1,duration:500,ease:"Power2",onComplete:()=>{this.time.delayedCall(5e3,(()=>{this.scene.start("Level1Outro")}))}}),this.addSparkle(this.cameras.main.width/2,this.cameras.main.height/2))}))}detectSwipe(e,t,s,i,a){let n=s-e,o=i-t;const h=this.sound.add("whooshSound");if(Math.abs(n)>Math.abs(o)){if(Math.abs(n)>50)return h.play({volume:3}),n>0?"right"===a:"left"===a}else if(Math.abs(o)>50)return h.play({volume:3}),o>0?"down"===a:"up"===a}addSparkle(e,t,s=1e3){this.sound.add("sparkle").play(),this.add.particles(e,t,"sparkle",{angle:{min:-360,max:360},speed:150,scaleX:.01,scaleY:.01,lifespan:1e3,duration:s})}showToast(e,t,s,i=2e3){var a;const n=this.add.image(this.cameras.main.width-300,350,"toastBg").setScale(650/this.cameras.main.width).setDepth(100),o=this.add.text(this.cameras.main.width-500,150,e,{fontSize:"44px",color:"#47261e",fontFamily:"Handwriting",wordWrap:{width:420,useAdvancedWrap:!0}}).setDepth(100);this.add.group([n,o]),t&&(null==(a=this.dialogue)||a.stop(),this.dialogue=this.sound.add(t),this.dialogue.once("play",(()=>{this.nonna.play("grandmaSpeaking")})),this.dialogue.once("complete",(()=>{this.nonna.anims.stop(),this.nonna.setFrame(1),s&&s()})),this.dialogue.play({volume:10}))}}class s extends Phaser.Scene{constructor(){super("Level1IntroStep1")}preload(){this.load.image("woodBg","assets/level-1/bg.png"),this.load.image("nextButton","assets/next-button.png"),this.load.image("dialogueBg","assets/dialogue-bg.png"),this.load.audio("dialogue1","assets/level-1/dialogue-1.mp3")}create(){const e=this.sound.add("hover"),t=this.sound.add("start");this.dialogueSound=this.sound.add("dialogue1");const s=this.add.image(0,0,"woodBg");s.setOrigin(0,0),s.setDisplaySize(this.sys.game.config.width,this.sys.game.config.height),this.nonna=this.add.sprite(this.cameras.main.width-1e3,this.cameras.main.height-400,"grandmaSpeaking").setOrigin(0,.5),this.nonna.setScale(1e3/this.nonna.width),this.nonna.preFX.addShadow();const i=this.add.image(0,this.cameras.main.height/4-100,"dialogueBg").setInteractive().setOrigin(0,.5);i.setScale(1200/this.cameras.main.width),i.preFX.addShadow(),this.add.text(200,this.cameras.main.height/4-100,"Ah, bene! You’ve arrived just in time! Making pasta by hand is not just cooking—it’s art, it’s tradition, it’s love! Now, let me show you how we bring life to flour and eggs. Are you ready? Don’t worry, I’ll teach you every step!",{fontSize:48,fill:"#47261e",fontFamily:"Handwriting",wordWrap:{width:1080}}).setOrigin(0,.5),this.dialogueSound.once("play",(()=>{this.nonna.play("grandmaSpeaking")})),this.dialogueSound.once("complete",(()=>{this.nonna.anims.stop(),this.nonna.setFrame(0)})),this.dialogueSound.play({volume:10});const a=this.add.image(230,this.cameras.main.height-200,"nextButton").setOrigin(.5,.5).setInteractive();a.setScale(250/this.cameras.main.width),a.preFX.addShadow(),a.on("pointerover",(function(t){e.play(),a.setScale(300/this.cameras.main.width)}),this),a.on("pointerout",(function(e){a.setScale(250/this.cameras.main.width)}),this),a.on("pointerdown",(e=>{t.play(),this.dialogueSound.stop(),this.scene.start("Level1IntroStep2")}),this)}}class i extends Phaser.Scene{constructor(){super("Level1IntroStep2")}preload(){this.load.image("kitchen","assets/level-1/kitchen-bg.png"),this.load.image("nextButton","assets/next-button.png"),this.load.image("dialogueBg","assets/dialogue-bg.png"),this.load.audio("dialogue2","assets/level-1/dialogue-2.mp3")}create(){const e=this.sound.add("hover"),t=this.sound.add("dialogue2"),s=this.add.image(0,0,"kitchen");s.setOrigin(0,0),s.setDisplaySize(this.sys.game.config.width,this.sys.game.config.height),this.nonna=this.add.sprite(this.cameras.main.width-1e3,this.cameras.main.height-400,"grandmaSpeaking").setOrigin(0,.5),this.nonna.setScale(1e3/this.nonna.width),this.nonna.preFX.addShadow(),this.nonna.play("grandmaSpeaking");const i=this.add.image(0,this.cameras.main.height/4-100,"dialogueBg").setInteractive().setOrigin(0,.5);i.setScale(1200/this.cameras.main.width),i.preFX.addShadow(),this.add.text(200,this.cameras.main.height/4-100,"Welcome to my kitchen, my little chef! Today, we begin your pasta journey with something simple but oh-so-delicious: fettuccine.",{fontSize:48,fill:"#47261e",fontFamily:"Handwriting",wordWrap:{width:1080}}).setOrigin(0,.5),t.on("complete",(()=>{this.nonna.anims.stop(),this.nonna.setFrame(0)})),t.play({volume:10}),t.on("complete",(()=>{this.nonna.anims.stop(),this.nonna.setFrame(0)}));const a=this.add.image(230,this.cameras.main.height-200,"nextButton").setOrigin(.5,.5).setInteractive();a.setScale(250/this.cameras.main.width),a.preFX.addShadow(),a.on("pointerover",(function(t){e.play(),a.setScale(300/this.cameras.main.width)}),this),a.on("pointerout",(function(e){a.setScale(250/this.cameras.main.width)}),this),a.on("pointerdown",(function(e){t.stop(),this.scene.start("Level1IntroStep3")}),this)}}class a extends Phaser.Scene{constructor(){super("Level1IntroStep3")}preload(){this.load.image("kitchen","assets/level-1/kitchen-bg.png"),this.load.image("nextButton","assets/next-button.png"),this.load.image("dialogueBg","assets/dialogue-bg.png"),this.load.audio("dialogue3","assets/level-1/dialogue-3.mp3")}create(){const e=this.sound.add("hover"),t=this.sound.add("start");this.dialogueSound=this.sound.add("dialogue3");const s=this.add.image(0,0,"kitchen");s.setOrigin(0,0),s.setDisplaySize(this.sys.game.config.width,this.sys.game.config.height),this.nonna=this.add.sprite(this.cameras.main.width-1e3,this.cameras.main.height-400,"grandmaSpeaking").setOrigin(0,.5),this.nonna.setScale(1e3/this.nonna.width),this.nonna.preFX.addShadow(),this.nonna.play("grandmaSpeaking");const i=this.add.image(0,this.cameras.main.height/4-100,"dialogueBg").setInteractive().setOrigin(0,.5);i.setScale(1200/this.cameras.main.width),i.preFX.addShadow(),this.add.text(200,this.cameras.main.height/4-100,"You’ve heard of it, no? Long, ribbon-like pasta—perfect with any sauce! My Nonna always said, ‘If you can make fettuccine, you can conquer the world!’ So let’s start your conquest, eh?",{fontSize:48,fill:"#47261e",fontFamily:"Handwriting",wordWrap:{width:1080}}).setOrigin(0,.5),this.dialogueSound.on("complete",(()=>{this.nonna.anims.stop(),this.nonna.setFrame(0)})),this.dialogueSound.play({volume:10});const a=this.add.image(230,this.cameras.main.height-200,"nextButton").setOrigin(.5,.5).setInteractive();a.setScale(250/this.cameras.main.width),a.preFX.addShadow(),a.on("pointerover",(function(t){e.play(),a.setScale(300/this.cameras.main.width)}),this),a.on("pointerout",(function(e){a.setScale(250/this.cameras.main.width)}),this),a.on("pointerdown",(e=>{t.play(),this.dialogueSound.stop(),this.scene.start("Level1")}),this)}}class n extends Phaser.Scene{constructor(){super("Level1Outro")}preload(){this.load.image("kitchen","assets/level-1/kitchen-bg.png"),this.load.image("nextButton","assets/next-button.png"),this.load.image("dialogueBg","assets/dialogue-bg.png"),this.load.audio("outro","assets/level-1/dialogues/finish-edited.mp3")}create(){const e=this.sound.add("hover"),t=this.sound.add("start");this.dialogueSound=this.sound.add("outro");const s=this.add.image(0,0,"kitchen");s.setOrigin(0,0),s.setDisplaySize(this.sys.game.config.width,this.sys.game.config.height),this.nonna=this.add.sprite(this.cameras.main.width-1e3,this.cameras.main.height-400,"grandmaSpeaking").setOrigin(0,.5),this.nonna.setScale(1e3/this.nonna.width),this.nonna.preFX.addShadow(),this.nonna.play("grandmaSpeaking");const i=this.add.image(0,this.cameras.main.height/4-100,"dialogueBg").setInteractive().setOrigin(0,.5);i.setScale(1200/this.cameras.main.width),i.preFX.addShadow(),this.add.text(200,this.cameras.main.height/4-100,"You did it! Your first fettuccine! Aren’t you proud? My Nonna would be. Just remember, pasta is life—and now, you’re living it!\nNow, if anyone tells you their pasta is better, tell them Nonna taught you. That will settle it, eh?",{fontSize:48,fill:"#47261e",fontFamily:"Handwriting",wordWrap:{width:1080}}).setOrigin(0,.5),this.dialogueSound.on("complete",(()=>{this.nonna.anims.stop(),this.nonna.setFrame(1)})),this.dialogueSound.play({volume:10});const a=this.add.image(230,this.cameras.main.height-200,"nextButton").setOrigin(.5,.5).setInteractive();a.setScale(250/this.cameras.main.width),a.preFX.addShadow(),a.on("pointerover",(function(t){e.play(),a.setScale(300/this.cameras.main.width)}),this),a.on("pointerout",(function(e){a.setScale(250/this.cameras.main.width)}),this),a.on("pointerdown",(e=>{t.play(),this.dialogueSound.stop(),this.scene.start("MainMenu")}),this)}}class o extends Phaser.Scene{constructor(){super("Preloader")}preload(){this.load.audio("hover","assets/sound-effects/hover.wav"),this.load.audio("start","assets/sound-effects/start.wav"),this.load.audio("select","assets/sound-effects/select.wav"),this.load.audio("bgm","assets/sound-effects/bgm.mp3"),this.load.audio("wrongOption","assets/sound-effects/wrong-option.wav"),this.load.audio("sparkle","assets/sound-effects/sparkle.wav"),this.load.image("soundIcon","assets/headphones.png"),this.load.image("muteIcon","assets/mute.png"),this.load.image("plank","assets/plank.png"),this.load.spritesheet("grandmaSpeaking","assets/level-1/grandma.png",{frameWidth:1125,frameHeight:1125}),this.load.spritesheet("grandmaBlinking","assets/grandma-blinking.png",{frameWidth:1125,frameHeight:1125})}create(){this.anims.create({key:"grandmaSpeaking",frames:this.anims.generateFrameNumbers("grandmaSpeaking",{start:0,end:8}),frameRate:5,repeat:-1}),this.sound.add("bgm").play({loop:!0,volume:.3}),this.scene.start("MainMenu")}}const h={type:Phaser.AUTO,width:1920,height:1280,parent:"game-container",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},scene:[o,e,s,i,a,t,n]};new Phaser.Game(h);
